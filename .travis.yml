language: cpp
sudo: false
os:
  - linux
  - osx
compiler:
  - clang
  - gcc
matrix:
  exclude:
    - os: osx
    - compiler: gcc

before_install:
  - cmake --version

script:
  - mkdir build
  - cd build
  - cmake -G "Unix Makefiles" -DGDCM_BUILD_TESTING:BOOL=ON -DGDCM_BUILD_APPLICATIONS:BOOL=ON -DGDCM_BUILD_SHARED_LIBS:BOOL=ON -DGDCM_ALLOW_INSOURCE_BUILD:BOOL=ON -DCMAKE_BUILD_TYPE:STRING=Debug -DBUILDNAME:STRING=${TRAVIS_OS_NAME}-${TRAVIS_BRANCH} ..
  - ctest -D ExperimentalStart
  - ctest -D ExperimentalBuild -V
  - ctest -D ExperimentalTest -j2 || true
  - ctest -D ExperimentalSubmit || true
